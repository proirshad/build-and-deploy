name: Build and Deploy Pipeline
on: 
    push:
jobs:
  docker-build:
    runs-on: ubuntu-latest
    steps:
     - name: docker build 
       run: echo docker build -t ${{ vars.CONTAINER_REGISTRY }}/${{ vars.DOCKER_USERNAME }}/${{ vars.IMAGE_NAME}}:latest .
     - name: docker login 
       run: echo "${{ secrets.DOCKER_PASSWORD }}" | docker login ${{ vars.CONTAINER_REGISTRY }} --username ${{ vars.DOCKER_USERNAME }} --password-stdin
     - name: docker publish
       run: echo docker push ${{ vars.CONTAINER_REGISTRY }}/${{ vars.DOCKER_USERNAME }}/${{ vars.IMAGE_NAME }}:latest
  docker-test:
    concurrency:
        group: docker-uat
        cancel-in-progress: true
    runs-on: ubuntu-latest
    steps:
        - name: gather OS version
          run: cat /etc/os-release

    
        